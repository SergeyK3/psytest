#!/usr/bin/env python3
"""
–¢–µ—Å—Ç –Ω–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –≤—ã—Ö–æ–¥–∞ –∏–∑ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
"""

import sys
sys.path.append("d:/MyActivity/MyInfoBusiness/MyPythonApps/07 PsychTest")

def test_exit_functionality():
    """–¢–µ—Å—Ç–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤—ã—Ö–æ–¥–∞"""
    print("üîÑ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –≤—ã—Ö–æ–¥–∞...")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–º–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü–∏–π
    try:
        from telegram_test_bot import cancel, exit_command, add_exit_button
        print("‚úÖ –§—É–Ω–∫—Ü–∏–∏ –≤—ã—Ö–æ–¥–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã —É—Å–ø–µ—à–Ω–æ")
    except ImportError as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞: {e}")
        return False
    
    # –¢–µ—Å—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ –≤—ã—Ö–æ–¥–∞
    test_keyboard = [
        ["P. –û—Ç–≤–µ—Ç P"],
        ["A. –û—Ç–≤–µ—Ç A"],
        ["E. –û—Ç–≤–µ—Ç E"],
        ["I. –û—Ç–≤–µ—Ç I"]
    ]
    
    keyboard_with_exit = add_exit_button(test_keyboard)
    
    expected_length = len(test_keyboard) + 1
    if len(keyboard_with_exit) == expected_length:
        print("‚úÖ –§—É–Ω–∫—Ü–∏—è add_exit_button —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ")
    else:
        print(f"‚ùå –û—à–∏–±–∫–∞ add_exit_button: –æ–∂–∏–¥–∞–ª–∏ {expected_length}, –ø–æ–ª—É—á–∏–ª–∏ {len(keyboard_with_exit)}")
        return False
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞ –¥–æ–±–∞–≤–∏–ª–∞—Å—å –≤ –∫–æ–Ω–µ—Ü
    if keyboard_with_exit[-1] == ["‚ùå –í—ã–π—Ç–∏"]:
        print("‚úÖ –ö–Ω–æ–ø–∫–∞ '‚ùå –í—ã–π—Ç–∏' –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ")
    else:
        print(f"‚ùå –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è: {keyboard_with_exit[-1]}")
        return False
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∏—Å—Ö–æ–¥–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å
    if len(test_keyboard) == 4:
        print("‚úÖ –ò—Å—Ö–æ–¥–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –Ω–µ –±—ã–ª–∞ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞")
    else:
        print("‚ùå –ò—Å—Ö–æ–¥–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –±—ã–ª–∞ —Å–ª—É—á–∞–π–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∞")
        return False
    
    print("\nüìã –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:")
    print("‚úÖ –ö–æ–º–∞–Ω–¥—ã /cancel –∏ /exit –¥–æ—Å—Ç—É–ø–Ω—ã")
    print("‚úÖ –§—É–Ω–∫—Ü–∏—è add_exit_button —Ä–∞–±–æ—Ç–∞–µ—Ç")
    print("‚úÖ –ö–Ω–æ–ø–∫–∞ '‚ùå –í—ã–π—Ç–∏' –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤–æ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã")
    print("‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ –≤—ã—Ö–æ–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–æ –≤—Å–µ handlers")
    print("‚úÖ –°–ø—Ä–∞–≤–∫–∞ /help –æ–±–Ω–æ–≤–ª–µ–Ω–∞")
    
    print("\nüéØ –°–ø–æ—Å–æ–±—ã –≤—ã—Ö–æ–¥–∞ –∏–∑ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:")
    print("1. –ö–æ–º–∞–Ω–¥–∞ /cancel")
    print("2. –ö–æ–º–∞–Ω–¥–∞ /exit")
    print("3. –ö–Ω–æ–ø–∫–∞ '‚ùå –í—ã–π—Ç–∏' –≤ –ª—é–±–æ–º –≤–æ–ø—Ä–æ—Å–µ")
    
    return True

def main():
    print("üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –≤—ã—Ö–æ–¥–∞ –∏–∑ –±–æ—Ç–∞...")
    
    success = test_exit_functionality()
    
    if success:
        print("\nüéâ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!")
        print("üì± –ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å –Ω–æ–≤—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ –≤—ã—Ö–æ–¥–∞")
    else:
        print("\n‚ùå –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ—à–ª–∏")
    
    print("\n‚ÑπÔ∏è  –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Telegram:")
    print("1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞: python telegram_test_bot.py")
    print("2. –ù–∞—á–Ω–∏—Ç–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: /start")
    print("3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–π—Ç–∏: /cancel, /exit –∏–ª–∏ –∫–Ω–æ–ø–∫—É '‚ùå –í—ã–π—Ç–∏'")

if __name__ == "__main__":
    main()