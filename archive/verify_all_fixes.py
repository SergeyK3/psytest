#!/usr/bin/env python3
"""
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. 5-–±–∞–ª–ª—å–Ω–∞—è —à–∫–∞–ª–∞ –Ω–∞ –¥–∏–∞–≥—Ä–∞–º–º–∞—Ö
2. –£–¥–∞–ª–µ–Ω–∏–µ "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:" —Ç–µ–∫—Å—Ç–∞
3. –£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–ø–∏—Å–∞–Ω–∏–π HEXACO 
4. –£–¥–∞–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ –∏–∑ Soft Skills
"""
import sys
sys.path.append('src')

from pathlib import Path
from enhanced_pdf_report_v2 import EnhancedPDFReportV2
import matplotlib.pyplot as plt

def test_chart_scaling():
    """–¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à–∫–∞–ª—ã –¥–∏–∞–≥—Ä–∞–º–º"""
    print("üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∫–∞–ª—ã –¥–∏–∞–≥—Ä–∞–º–º...")
    
    # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ 5-–±–∞–ª–ª—å–Ω–æ–π —à–∫–∞–ª—ã
    from enhanced_pdf_report_v2 import EnhancedCharts
    
    labels = ['–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è', '–†–∞–±–æ—Ç–∞ –≤ –∫–æ–º–∞–Ω–¥–µ', '–õ–∏–¥–µ—Ä—Å—Ç–≤–æ']
    values = [4.5, 3.2, 2.8]
    
    # –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–¥–∞—Ä–Ω–æ–π –¥–∏–∞–≥—Ä–∞–º–º—ã —Å 5-–±–∞–ª–ª—å–Ω–æ–π —à–∫–∞–ª–æ–π
    test_path = Path('test_verify_radar.png')
    EnhancedCharts.create_minimalist_radar(labels, values, '–ü—Ä–æ–≤–µ—Ä–∫–∞ —à–∫–∞–ª—ã', test_path)
    
    print(f"‚úÖ –†–∞–¥–∞—Ä–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ —Å–æ–∑–¥–∞–Ω–∞: {test_path}")
    print("   –®–∫–∞–ª–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å: 0, 1, 2, 3, 4, 5 (–ù–ï 0, 2, 4, 6, 8, 10)")
    
    # –°–æ–∑–¥–∞–Ω–∏–µ –±–∞—Ä–Ω–æ–π –¥–∏–∞–≥—Ä–∞–º–º—ã
    test_path2 = Path('test_verify_bar.png')
    EnhancedCharts.create_minimalist_bar_chart(labels, values, '–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞—Ä–Ω–æ–π –¥–∏–∞–≥—Ä–∞–º–º—ã', test_path2)
    
    print(f"‚úÖ –ë–∞—Ä–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ —Å–æ–∑–¥–∞–Ω–∞: {test_path2}")
    return True

def test_pdf_content():
    """–¢–µ—Å—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ PDF"""
    print("\nüîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ PDF...")
    
    # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
    user_data = {
        'name': '–¢–µ—Å—Ç–æ–≤—ã–π –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å',
        'paei_scores': {'P': 3, 'A': 2, 'E': 4, 'I': 3},
        'disc_scores': {'D': 15, 'I': 12, 'S': 8, 'C': 10},
        'hexaco_scores': {
            '–ß–µ—Å—Ç–Ω–æ—Å—Ç—å-–°–∫—Ä–æ–º–Ω–æ—Å—Ç—å': 4.2,
            '–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å': 3.8, 
            '–≠–∫—Å—Ç—Ä–∞–≤–µ—Ä—Å–∏—è': 3.5,
            '–î—Ä—É–∂–µ–ª—é–±–∏–µ': 4.0,
            '–î–æ–±—Ä–æ—Å–æ–≤–µ—Å—Ç–Ω–æ—Å—Ç—å': 4.5,
            '–û—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å –æ–ø—ã—Ç—É': 3.9
        },
        'soft_skills_scores': {
            '–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è': 4.1,
            '–†–∞–±–æ—Ç–∞ –≤ –∫–æ–º–∞–Ω–¥–µ': 3.9,
            '–õ–∏–¥–µ—Ä—Å—Ç–≤–æ': 3.7,
            '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ': 4.2
        }
    }
    
    # –°–æ–∑–¥–∞–Ω–∏–µ PDF-–æ—Ç—á–µ—Ç–∞
    generator = EnhancedPDFReportV2()
    pdf_path = Path('test_verify_report.pdf')
    
    try:
        generator.generate_enhanced_report(
            user_data=user_data,
            output_path=str(pdf_path),
            include_questions=False
        )
        print(f"‚úÖ PDF-–æ—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: {pdf_path}")
        print("   –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:")
        print("   1. ‚ùå –ù–µ—Ç —Ç–µ–∫—Å—Ç–∞ '–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:' –ø–æ–¥ –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏")
        print("   2. ‚ùå –ù–µ—Ç —Ä–∞–∑–¥–µ–ª–∞ '–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:' –≤ Soft Skills")
        print("   3. ‚ùå –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è HEXACO")
        print("   4. ‚úÖ –î–∏–∞–≥—Ä–∞–º–º—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç 5-–±–∞–ª–ª—å–Ω—É—é —à–∫–∞–ª—É")
        return True
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è PDF: {e}")
        return False

def main():
    print("üöÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π")
    print("="*50)
    
    # –¢–µ—Å—Ç –¥–∏–∞–≥—Ä–∞–º–º
    chart_ok = test_chart_scaling()
    
    # –¢–µ—Å—Ç PDF
    pdf_ok = test_pdf_content()
    
    print("\nüìã –ò–¢–û–ì–û–í–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢:")
    print("="*50)
    if chart_ok and pdf_ok:
        print("‚úÖ –í–°–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´ –£–°–ü–ï–®–ù–û!")
        print("üéØ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:")
        print("   ‚Ä¢ 5-–±–∞–ª–ª—å–Ω–∞—è —à–∫–∞–ª–∞ –Ω–∞ –¥–∏–∞–≥—Ä–∞–º–º–∞—Ö")
        print("   ‚Ä¢ –£–¥–∞–ª–µ–Ω —Ç–µ–∫—Å—Ç '–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:' –ø–æ–¥ –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏")
        print("   ‚Ä¢ –£–¥–∞–ª–µ–Ω–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –∏–∑ Soft Skills")
        print("   ‚Ä¢ –£–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è HEXACO")
    else:
        print("‚ùå –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–≤–∞–ª–∏–ª–∏—Å—å")
        print("üîß –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞")

if __name__ == "__main__":
    main()